<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Manager</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        :root { --bg: #f5f7fa; --card: #ffffff; --primary: #007bff; --dark: #24292f; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #333; }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header { max-width: 1200px; margin: 0 auto 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #dee2e6; padding-bottom: 15px; }
        
        /* ç®¡ç†ç”¨ãƒœã‚¿ãƒ³ï¼šnplus-hubç”¨ã«ä¿®æ­£ */
        .admin-btn { 
            background: var(--dark); color: white; text-decoration: none; padding: 10px 20px; 
            border-radius: 6px; font-weight: bold; font-size: 14px; transition: 0.2s;
        }
        .admin-btn:hover { background: #000; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }

        /* ã‚«ãƒ¼ãƒ‰å½¢å¼ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
        .card { background: var(--card); border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid #e1e4e8; display: flex; flex-direction: column; }
        
        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ */
        .preview { width: 100%; height: 180px; background: #eaeff2; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .preview img, .preview video, .preview model-viewer { width: 100%; height: 100%; object-fit: contain; }
        
        .card-body { padding: 16px; flex-grow: 1; }
        .file-name { font-weight: bold; font-size: 15px; margin-bottom: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        /* ãƒœã‚¿ãƒ³é¡ */
        .actions { display: flex; gap: 8px; }
        .btn { flex: 1; padding: 10px; font-size: 13px; border-radius: 6px; cursor: pointer; text-align: center; text-decoration: none; font-weight: bold; border: 1px solid #d1d5da; background: #fafbfc; color: #24292f; }
        .btn-primary { background: var(--primary); color: white; border: none; }
        .btn-primary:hover { background: #0069d9; }
    </style>
</head>
<body>

<div class="header">
    <h1 style="margin:0; font-size: 24px;">Asset Library</h1>
    <a href="https://github.com/nplus-hub/my-assets/tree/main/assets" target="_blank" class="admin-btn">
        ç´ æã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    </a>
</div>

<div class="container" id="asset-gallery">
    </div>

<script>
    /**
     * ã€ç´ æã®æ•´ç†ãƒ»è¡¨ç¤ºè¨­å®šã€‘
     * file: assetsãƒ•ã‚©ãƒ«ãƒ€å†…ã®å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«å
     * type: 'image', 'video', 'audio', '3d'
     */
    const myAssets = [
        { name: "ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ", file: "sample.png", type: "image" },
        { name: "ãƒ‡ãƒ¢å‹•ç”»", file: "demo.mp4", type: "video" },
        { name: "3Dãƒ¢ãƒ‡ãƒ«ç´ æ", file: "model.glb", type: "3d" }
    ];

    // ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ™ãƒ¼ã‚¹URLã‚’è‡ªå‹•ç”Ÿæˆï¼ˆnplus-hub/my-assetsã«å¯¾å¿œï¼‰
    const assetBase = window.location.origin + window.location.pathname.replace(/\/$/, "") + "/assets/";

    const gallery = document.getElementById('asset-gallery');

    myAssets.forEach(item => {
        const fileURL = assetBase + item.file;
        const card = document.createElement('div');
        card.className = 'card';
        
        let previewContent = '';
        if(item.type === 'image') {
            previewContent = `<img src="${fileURL}" onerror="this.src='https://placehold.jp/24/cccccc/ffffff/200x200.png?text=No%20Image'">`;
        } else if(item.type === 'video') {
            previewContent = `<video src="${fileURL}" controls></video>`;
        } else if(item.type === 'audio') {
            previewContent = `ğŸµ<audio src="${fileURL}" controls style="position:absolute; bottom:5px; width:90%; height:30px;"></audio>`;
        } else if(item.type === '3d') {
            previewContent = `<model-viewer src="${fileURL}" auto-rotate camera-controls shadow-intensity="1"></model-viewer>`;
        }

        card.innerHTML = `
            <div class="preview">${previewContent}</div>
            <div class="card-body">
                <div class="file-name" title="${item.name}">${item.name}</div>
                <div class="actions">
                    <a href="${fileURL}" download class="btn btn-primary">DL</a>
                    <button class="btn" onclick="copyLink('${fileURL}', this)">URLã‚³ãƒ”ãƒ¼</button>
                </div>
            </div>`;
        gallery.appendChild(card);
    });

    // ç›´ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹æ©Ÿèƒ½
    function copyLink(url, btn) {
        navigator.clipboard.writeText(url).then(() => {
            const originalText = btn.innerText;
            btn.innerText = "ã‚³ãƒ”ãƒ¼å®Œäº†";
            btn.style.backgroundColor = "#e6ffec";
            setTimeout(() => {
                btn.innerText = originalText;
                btn.style.backgroundColor = "";
            }, 1500);
        }).catch(() => {
            alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
        });
    }
</script>

</body>
</html>
