<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Asset Library</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        :root { --bg: #f0f2f5; --card: #ffffff; --primary: #0d6efd; --admin: #dc3545; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        
        /* ç®¡ç†è€…ç”¨ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒªã‚¢ */
        .admin-panel { 
            max-width: 600px; margin: 0 auto 40px; background: #fff; padding: 20px; 
            border: 2px dashed #ccc; border-radius: 12px; text-align: center;
        }
        .upload-link { 
            display: inline-block; padding: 12px 24px; background: var(--admin); 
            color: white; text-decoration: none; border-radius: 8px; font-weight: bold;
            transition: transform 0.2s;
        }
        .upload-link:hover { transform: scale(1.05); background: #c82333; }

        .container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
        .card { background: var(--card); border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .preview { width: 100%; height: 180px; background: #333; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .preview img, .preview video, .preview model-viewer { width: 100%; height: 100%; object-fit: contain; }
        
        .card-content { padding: 15px; }
        .title { font-weight: bold; margin-bottom: 12px; font-size: 1rem; color: #333; }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .btn { padding: 10px; border-radius: 6px; text-decoration: none; text-align: center; font-size: 0.8rem; cursor: pointer; border: none; font-weight: bold; }
        .btn-dl { background: var(--primary); color: white; }
        .btn-copy { background: #6c757d; color: white; }
        .copied { background: #198754 !important; }
    </style>
</head>
<body>

<div class="header">
    <h1>NPLUS Asset Manager</h1>
</div>

<div class="admin-panel">
    <p style="margin-top:0; color:#666;">ç®¡ç†è€…ãƒ¡ãƒ‹ãƒ¥ãƒ¼</p>
    <a href="https://github.com/nplus-assets/my-assets/upload/main/assets" target="_blank" class="upload-link">
        ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (GitHubã‚’é–‹ã)
    </a>
    <p style="font-size: 0.8rem; color: #888; margin-bottom:0;">â€»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã€index.htmlã®ãƒªã‚¹ãƒˆã«è¿½åŠ ã™ã‚‹ã¨ç”»é¢ã«åæ˜ ã•ã‚Œã¾ã™</p>
</div>

<div class="container" id="asset-container"></div>

<script>
    // ã€ç´ æãƒªã‚¹ãƒˆã€‘æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ãŸã‚‰ã“ã“ã«è¿½è¨˜ã—ã¦ãã ã•ã„
    const assets = [
        { name: "ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ", file: "image.png", type: "image" },
        { name: "ã‚µãƒ³ãƒ—ãƒ«å‹•ç”»", file: "video.mp4", type: "video" },
        { name: "ã‚µãƒ³ãƒ—ãƒ«éŸ³æ¥½", file: "music.mp3", type: "audio" },
        { name: "ã‚µãƒ³ãƒ—ãƒ«3D", file: "model.glb", type: "3d" }
    ];

    // ãƒ‘ã‚¹è¨­å®šï¼ˆãƒªãƒã‚¸ãƒˆãƒªå my-assets ã«å¯¾å¿œï¼‰
    const baseURL = "https://nplus-assets.github.io/my-assets/assets/";

    const container = document.getElementById('asset-container');
    assets.forEach(asset => {
        const fullURL = baseURL + asset.file;
        const card = document.createElement('div');
        card.className = 'card';

        let previewHTML = '';
        if(asset.type === 'image') previewHTML = `<img src="${fullURL}">`;
        else if(asset.type === 'video') previewHTML = `<video src="${fullURL}" controls muted></video>`;
        else if(asset.type === 'audio') previewHTML = `<div style="font-size:3rem;">ğŸµ</div><audio src="${fullURL}" controls style="position:absolute; bottom:0; width:100%; height:30px;"></audio>`;
        else if(asset.type === '3d') previewHTML = `<model-viewer src="${fullURL}" auto-rotate camera-controls shadow-intensity="1"></model-viewer>`;

        card.innerHTML = `
            <div class="preview" style="position:relative;">${previewHTML}</div>
            <div class="card-content">
                <div class="title">${asset.name}</div>
                <div class="btn-group">
                    <a href="${fullURL}" download class="btn btn-dl">ä¿å­˜</a>
                    <button onclick="copyURL('${fullURL}', this)" class="btn btn-copy">URLã‚³ãƒ”ãƒ¼</button>
                </div>
            </div>
        `;
        container.appendChild(card);
    });

    function copyURL(url, btn) {
        navigator.clipboard.writeText(url).then(() => {
            const oldText = btn.innerText;
            btn.innerText = "Copied!";
            btn.classList.add('copied');
            setTimeout(() => {
                btn.innerText = oldText;
                btn.classList.remove('copied');
            }, 1500);
        });
    }
</script>

</body>
</html>
